# Note0912




<!-- MarkdownTOC -->

- [å¿«é€Ÿå“åº”çš„ click äº‹ä»¶](#å¿«é€Ÿå“åº”çš„-click-äº‹ä»¶)
- [é€‰æ‹©å™¨](#é€‰æ‹©å™¨)
- [ä¼ªé€‰æ‹©å™¨](#ä¼ªé€‰æ‹©å™¨)
- [flexbox å’Œå…¶ä»– CSS çš„åŒºåˆ«](#flexbox-å’Œå…¶ä»–-css-çš„åŒºåˆ«)
- [æµè§ˆå™¨  ç¼“å­˜æ•æ„Ÿ](#æµè§ˆå™¨-ç¼“å­˜æ•æ„Ÿ)
- [license Management sys é—ç•™é—®é¢˜](#license-management-sys-é—ç•™é—®é¢˜)
- [input æ ‡ç­¾çš„ change äº‹ä»¶](#input-æ ‡ç­¾çš„-change-äº‹ä»¶)
- [DOM äº‹ä»¶ä¼ é€’æœºåˆ¶-å†’æ³¡å’Œæ•è·](#dom-äº‹ä»¶ä¼ é€’æœºåˆ¶-å†’æ³¡å’Œæ•è·)
  - [get things ready](#get-things-ready)
  - [eventPhase](#eventphase)
  - [stopPropagation](#stoppropagation)
  - [preventDefault](#preventdefault)
  - [Delegation](#delegation)
  - [æµè§ˆå™¨ç¯å¢ƒ](#æµè§ˆå™¨ç¯å¢ƒ)

<!-- /MarkdownTOC -->





## å¿«é€Ÿå“åº”çš„ click äº‹ä»¶




## é€‰æ‹©å™¨




## ä¼ªé€‰æ‹©å™¨



## flexbox å’Œå…¶ä»– CSS çš„åŒºåˆ«


## æµè§ˆå™¨  ç¼“å­˜æ•æ„Ÿ


## license Management sys é—ç•™é—®é¢˜

- ä¸»é¡µé¢å…ƒç´ è¶…å‡º
- button åŠ¨æ•ˆ
- button onclick äº‹ä»¶ç»‘å®š


## input æ ‡ç­¾çš„ change äº‹ä»¶

è§¦å‘æ—¶é—´



## DOM äº‹ä»¶ä¼ é€’æœºåˆ¶-å†’æ³¡å’Œæ•è·

[DOM çš„äº‹ä»¶å‚³éæ©Ÿåˆ¶ï¼šæ•ç²èˆ‡å†’æ³¡](https://blog.techbridge.cc/2017/07/15/javascript-event-propagation/)

è¿™ç¯‡ blog è®²å¾—å¾ˆè¯¦ç»†äº†

[js event order](https://www.quirksmode.org/js/events_order.html#link4)

### get things ready

å…ˆå¸ƒå±€ä¸€ä¸ªåµŒå¥—çš„ html

```html
<ul id="list">
  <li id="list_item">
    <a id="list_item_link" target="_blank" href="http://google.com">
        google.com
    </a>
  </li>
</ul>
```

å¯¹åº”çš„ DOM æ ‘ï¼š

![](http://yuml.me/diagram/nofunky/class/[ul|list]->[li|list_item],[li|list_item]->[a|list_item_link])

å¯ä»¥åœ¨ä¸‹é¢è¿›è¡Œç‚¹å‡»è°ƒè¯•ğŸ™†â€

<ul id="list">
    |_list_|
  <li id="list_item">
    |_list_item_
    <a id="list_item_link" target="_blank" href="http://google.com">
        |_google.com
    </a>
  </li>
</ul>

### eventPhase

å…ˆè·å–ä¸‹éœ€è¦æ“ä½œçš„ eventTarget

```js
const get = (id) => document.getElementById(id);
const $list = get('list');
const $list_item = get('list_item');
const $list_item_link = get('list_item_link');
```

å†ç»™ä¸ª DOM å¯¹è±¡åŠ ä¸Š click äº‹ä»¶ï¼š

```js
$list_item.addEventListener('click',(e) => {
    console.log(e.eventPhase);
})
```

`Event.eventPhase` æœ‰ 4 ä¸ªå€¼ 0,1,2,3 ï¼Œåœ¨ [Note0914](Note0914.md) ä¸­æœ‰äº†è§£

æ•è·é˜¶æ®µ addEventListener è¿˜æ˜¯åœ¨å†’æ³¡é˜¶æ®µ äº‹ä»¶ç›‘å¬

- å…ˆæ•è·ï¼Œåå†’æ³¡
- å½“äº‹ä»¶ä¼ åˆ° target æœ¬èº«ï¼Œæ²¡æœ‰æ•è·å’Œå†’æ³¡åˆ†åˆ«


### stopPropagation

æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸­æ–­äº‹ä»¶æµï¼Œè®©äº‹ä»¶ä¼ é€’ä¸å†ç»§ç»­ï¼Œå¯ä»¥ç”¨ `eventTarget.stopPropagation()`ï¼Œå‡å¦‚æˆ‘åŠ åœ¨ `#list` çš„æ•ç²éšæ®µ  ï¼š

```js
// #list capturing
$list.addEventListener('click', (e) => {
  console.log('list capturing', e.eventPhase);
  e.stopPropagation();
}, true)
```

é‚£ä¹ˆè¾“å‡ºç»“æœå°±åªæœ‰

```js
list capturing 1
```

æœ‰ç‚¹éœ€è¦ç‰¹åˆ«è¯´æ˜ï¼ŒstopPropagation() ä¸­æ–­çš„äº‹ä»¶ä¼ é€’ï¼Œåªæ˜¯å½“å‰ eventListener çš„äº‹ä»¶ä¼ é€’è¿‡ç¨‹ï¼Œå…¶ä»–çš„ listener çš„äº‹ä»¶ä¼ é€’è¿‡ç¨‹ä¸å—å½±å“ã€‚

å½“ç„¶ï¼Œå¦‚æœæƒ³ä¸­æ–­æ‰åŒä¸€å±‚çº§çš„å…¶ä»– listener ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬ç”¨ `stopImmediatePropagation` :hugs: 

```js
// list çš„æ•ç²
$list.addEventListener('click', (e) => {
  console.log('list capturing');
  e.stopImmediatePropagation();
}, true)
  
// list çš„æ•ç² 2
$list.addEventListener('click', (e) => {
  console.log('list capturing2');
}, true)
```

è¾“å‡ºï¼š

```js
list capturing
```


### preventDefault

å–æ¶ˆæµè§ˆå™¨é¢„è®¾ï¼Œå¦‚é˜»æ­¢è¶…é“¾æ¥

```js
// list_item_link çš„å†’æ³¡
$list_item_link.addEventListener('click', (e) => {
  e.preventDefault();
}, false)
```

è¿™æ—¶å€™ï¼Œå½“ç‚¹å‡»é“¾æ¥çš„æ—¶å€™ï¼Œå°±ä¸æœƒæ‰§è¡Œé¢„è®¾çš„è¡Œç‚ºï¼ˆæ–°é–‹åˆ†é æˆ–æ˜¯è·³è½‰ï¼‰ï¼Œè€Œæ˜¯æ²’æœ‰ä»»ä½•äº‹æƒ…ç™¼ç”Ÿï¼Œé€™å°±æ˜¯ preventDefault çš„ä½œç”¨ã€‚

è¿™ç‚¹è·Ÿ JavaScript äº‹ä»¶äº‹ä»¶ä¼ é€’æ²¡æœ‰ä¸€ç‚¹å…³ç³»ï¼Œä½ åŠ ä¸Šé€™ä¸€è¡Œä¹‹å¾Œï¼Œäº‹ä»¶é‚„æ˜¯æœƒç¹¼çºŒå¾€ä¸‹å‚³éã€‚


### Delegation

é€šè¿‡äº‹ä»¶ä¼ é€’æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›æŠ€å·§æ€§çš„å·¥ä½œ â€”â€”â€”â€” äº‹ä»¶ä»£ç†ï¼Œé€šè¿‡çˆ¶èŠ‚ç‚¹æ¥å¤„ç†å­èŠ‚ç‚¹çš„äº‹æƒ…

ç°åœ¨ä¸€ä¸ª `ul` ä¸‹æœ‰å¤šä¸ª `li` å¦‚æœéœ€è¦ç›‘å¬æ¯ä¸ª `li` çš„ `click` äº‹ä»¶ï¼ŒåŸæ¥çš„æƒ³æ³•æ˜¯ç»™æ¯ä¸ª `li` éƒ½æ·»åŠ  `eventLictener` é‚£æ ·ä»£ç ç»´æŠ¤èµ·æ¥ä¼šæ˜¯ä¸€ä»¶ååˆ†å¯æ€•çš„äº‹æƒ…ã€‚

```html
<ul id="lis">
    <li data-index="1">1</li>
    <li data-index="2">2</li>
    <li data-index="3">3</li>
</ul>
```
äº‹ä»¶ä¼ é€’å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» `li` çš„äº‹ä»¶ä¼šä¼ åˆ° `ul` èº«ä¸Šï¼Œå› æ­¤å¯ä»¥å°±åœ¨ `ul` ä¸ŠæŒ‚ä¸€ä¸ª `eventListener` å³å¯

```js
document.getElementById('lis').addEventListener('click', (e) => {
    console.log(e.target.getAttribute('data-index'));
})
```

test here :clown_face:

<ul id="lis">
    <li data-index="1">1</li>
    <li data-index="2">2</li>
    <li data-index="3">3</li>
</ul>


### æµè§ˆå™¨ç¯å¢ƒ

[W3Cäº‹ä»¶æ¨¡å‹](https://www.quirksmode.org/js/events_order.html#link4)

capturing & bubbling æ˜¯æœ‰å†å²é—ç•™é—®é¢˜çš„

ç°åœ¨å‡è®¾åœ¨ element1 ä¸­æœ‰ element2

```html
---------------------------------
| element1                      |
| ---------------------------   |
| | element2                |   |
| ---------------------------   |
|                               |
---------------------------------
```

å¹¶ä¸”éƒ½æœ‰ä¸€ä¸ªonClickäº‹ä»¶å¤„ç†ç¨‹åºã€‚å¦‚æœç”¨æˆ·å•å‡»element2ï¼Œåˆ™ä¼šåœ¨element1å’Œelement2ä¸­ç”Ÿæˆclickäº‹ä»¶ã€‚ä½†å“ªä¸ªäº‹ä»¶é¦–å…ˆå‘ç”Ÿï¼Ÿåº”è¯¥é¦–å…ˆæ‰§è¡Œå“ªä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Ÿ

æ¢å¥è¯è¯´ï¼Œäº‹ä»¶é¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨ä»¥å‰ä¸æ˜ç¡®çš„æ—¶é—´ï¼ŒNetscape å’Œå¾®è½¯ç»™å‡ºäº†ä¸¤ä¸ªä¸åŒç­”æ¡ˆ

>Netscapeè¡¨ç¤ºelement1ä¸Šçš„äº‹ä»¶é¦–å…ˆå‘ç”Ÿã€‚è¿™ç§°ä¸ºäº‹ä»¶æ•è·ã€‚

>MicrosoftåšæŒè®¤ä¸ºelement2ä¸Šçš„äº‹ä»¶ä¼˜å…ˆã€‚è¿™ç§°ä¸ºäº‹ä»¶å†’æ³¡ã€‚

Explorerä»…æ”¯æŒäº‹ä»¶å†’æ³¡ã€‚Mozillaï¼ŒOpera 7å’ŒKonqueroréƒ½æ”¯æŒè¿™ä¸¤ç§æ–¹å¼ã€‚æ—§ç‰ˆOperaå’ŒiCabéƒ½ä¸æ”¯æŒã€‚

ä¸Šé¢æå‡ºçš„ ã€å…ˆæ•è·ï¼Œåå†’æ³¡ã€ çš„æ¨¡å‹æ˜¯W3Cäº‹ä»¶æ¨¡å‹ï¼Œå¹¶ä¸”å»ºç«‹äº†ç»Ÿä¸€çš„æ ‡å‡†ï¼Œç°åœ¨ä¹Ÿæ˜¯ä¸€ç›´å»¶ç”¨çš„ã€‚















